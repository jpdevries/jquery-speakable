/*! jQuery Speakable Plugin - v0.0.0 - 2015-03-05
* https://github.com/jpdevries/jquery-speakable
* Copyright (c) 2015 JP DeVries; Licensed MIT */
!function(a,b,c){"use strict";function d(b,c){this.element=b,this.settings=a.extend({},f,c),this._defaults=f,this._name=e,this.init()}var e="speakable",f={voice:null,lang:"en-US",msg:null,rate:null,pitch:null,volume:null,transcript:"",tidyTranscript:!0,unspeakable:"[muted]",enunciate:"enunciate",onstart:function(){},onend:function(){},onerror:function(){},onpause:function(){},onresume:function(){},onmark:function(){},onboundary:function(){}};a.extend(d.prototype,{init:function(){if(b.speechSynthesis){a(this.element)}},speak:function(){function d(b){var c=a(b).clone();return g.tidyTranscript?c.data(g.enunciate)?c.data(g.enunciate):(g.enunciate&&c.find("*[data-"+g.enunciate+"]").each(function(){a(this).text(a(this).attr("data-"+g.enunciate))}),g.unspeakable&&c.find(g.unspeakable).empty().remove(),c.text()):c.text()}var e=b.speechSynthesis.getVoices(),f=a(this.element),g=this.settings;f[0].dataset.voice&&(g.voice=f[0].dataset.voice),f[0].dataset.lang&&(g.lang=f[0].dataset.lang),f[0].dataset.transcript&&(g.transcript=f[0].dataset.transcript),f[0].dataset.text&&(g.text=f[0].dataset.text),f[0].dataset.rate&&(g.rate=f[0].dataset.rate),f[0].dataset.pitch&&(g.pitch=f[0].dataset.pitch),f[0].dataset.volume&&(g.volume=f[0].dataset.volume);var h,i=g.voice||null,j=g.text||a(f).data("text")||null;h=j?j:c.getElementById(g.transcript)?d(c.getElementById(g.transcript)):g.transcript?g.transcript:d(f);var k=new SpeechSynthesisUtterance;k.text=h,k.lang=g.lang,null!==i&&(k.voice=e.filter(function(a){return a.name===i})[0]),null!==g.rate&&(k.rate=g.rate),null!==g.pitch&&(k.pitch=g.pitch),null!==g.volume&&(k.volume=g.volume),"function"==typeof g.onstart&&(k.onstart=g.onstart),"function"==typeof g.onend&&(k.onend=g.onend),"function"==typeof g.onerror&&(k.onerror=g.onerror),"function"==typeof g.onpause&&(k.onpause=g.onpause),"function"==typeof g.onresume&&(k.onresume=g.onresume),"function"==typeof g.onmark&&(k.onmark=g.onmark),"function"==typeof g.onboundary&&(k.onboundary=g.onboundary),b.speechSynthesis.speak(k)}}),a.fn[e]=function(b){return this.each(function(){a.data(this,"plugin_"+e)||a.data(this,"plugin_"+e,new d(this,b))})}}(jQuery,window,document);